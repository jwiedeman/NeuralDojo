<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neural Garden: Go Self-Play Lab</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header>
      <div class="title">GO ARENA — NEURAL GARDEN</div>
      <div class="subtitle">Self-play Go network. Same brain on both sides. Watch confidence & weights evolve.</div>
    </header>

    <main class="split">
      <section class="pane left">
        <div class="panel-header">GO SELF-PLAY ARENA (9×9)</div>
        <canvas id="board" width="540" height="540"></canvas>
        <div class="hud">
          <div>Turn: <span id="turnLabel">Black</span></div>
          <div>Move #: <span id="moveCount">0</span></div>
          <div>Captures — B: <span id="capB">0</span> · W: <span id="capW">0</span></div>
        </div>
        <div class="hud secondary">
          <div>Confidence (black win): <span id="confNow">—</span></div>
          <div>Status: <span id="statusText">Idle</span></div>
        </div>

        <div class="panel-sub">Last completed game</div>
        <div class="stats compact">
          <div>Game #: <span id="gameCount">0</span></div>
          <div>Winner: <span id="lastWinner">—</span></div>
          <div>Score (B−W): <span id="lastScore">—</span></div>
        </div>
      </section>

      <section class="pane right">
        <div class="panel-header">SELF-PLAY TRAINING LOOP</div>
        <div class="explain">
          Growing a neural Go player by gradient descent. One tiny value network learns via endless self-play.<br />
          Same network evaluates both colours; only learning rule is hand-coded. Everything else emerges from updates.
        </div>

        <div class="controls row">
          <button id="startBtn">START</button>
          <button id="pauseBtn">PAUSE</button>
          <button id="resetBtn">RESET NETWORK</button>
        </div>

        <div class="grid-2">
          <div>
            <div class="label">Learning Rate (α)</div>
            <input type="range" id="learningRate" min="0.01" max="0.30" step="0.01" value="0.10" />
            <div class="val" id="learningRateVal">0.10</div>
          </div>
          <div>
            <div class="label">Hidden Units</div>
            <input type="range" id="hiddenUnits" min="2" max="24" step="1" value="6" />
            <div class="val" id="hiddenUnitsVal">6</div>
          </div>
        </div>

        <div class="grid-2">
          <div>
            <div class="label">Exploration (ε)</div>
            <input type="range" id="epsilon" min="0.00" max="0.40" step="0.01" value="0.10" />
            <div class="val" id="epsilonVal">0.10</div>
          </div>
          <div>
            <div class="label">Move Delay (ms)</div>
            <input type="range" id="delayMs" min="0" max="400" step="20" value="160" />
            <div class="val" id="delayMsVal">160</div>
          </div>
        </div>

        <div class="panel-sep"></div>

        <div class="panel-sub">Cumulative stats</div>
        <div class="stats">
          <div>Total games: <span id="totalGames">0</span></div>
          <div>Black wins: <span id="blackWins">0</span></div>
          <div>White wins: <span id="whiteWins">0</span></div>
          <div>Black win rate: <span id="blackWinRate">—</span></div>
          <div>Prediction accuracy: <span id="predAccuracy">—</span></div>
          <div>Avg confidence: <span id="avgConfidence">—</span></div>
          <div>Training steps: <span id="trainingSteps">0</span></div>
          <div>Output bias: <span id="outputBias">0.000</span></div>
        </div>

        <div class="panel-sep"></div>

        <div class="panel-sub">Projected Confidence Trend</div>
        <canvas id="trend" width="520" height="220"></canvas>

        <div class="panel-sep"></div>

        <div class="panel-sub">Network Weights (Input → Hidden)</div>
        <div class="weights-legend">Orange = drives toward black victory, Blue = toward white. Gray ≈ neutral. Last column weight = player-to-move feature.</div>
        <div id="weightsGrid" class="weights-grid"></div>

        <div class="panel-sub">Output weights (hidden → win probability)</div>
        <canvas id="outputWeights" width="520" height="90"></canvas>
      </section>
    </main>
  </div>

  <script src="go_engine.js"></script>
  <script src="main.js"></script>
</body>
</html>

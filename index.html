<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neural Garden: Go Arena (9×9)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header>
      <div class="title">GO ARENA — NEURAL GARDEN</div>
      <div class="subtitle">Left: 9×9 Go. Right: live MCTS stats & controls (SGD.fyi style).</div>
    </header>

    <main class="split">
      <!-- LEFT: Board -->
      <section class="pane left">
        <div class="panel-header">GO BOARD (9×9)</div>
        <canvas id="board" width="540" height="540"></canvas>
        <div class="hud">
          <div>Turn: <span id="turnLabel">Black</span></div>
          <div>Captures — Black: <span id="capB">0</span> · White: <span id="capW">0</span></div>
          <div>Status: <span id="statusText">Ready</span></div>
        </div>
        <div class="controls row">
          <button id="newGame">NEW GAME</button>
          <button id="passBtn">PASS</button>
          <button id="undoBtn">UNDO</button>
          <label class="toggle">
            <input type="checkbox" id="aiPlaysBlack" />
            AI plays Black
          </label>
          <label class="toggle">
            <input type="checkbox" id="aiPlaysWhite" checked />
            AI plays White
          </label>
        </div>
      </section>

      <!-- RIGHT: Stats -->
      <section class="pane right">
        <div class="panel-header">SEARCH TASK</div>
        <div class="explain">
          <b>OBJECTIVE:</b> Choose a move that maximizes win probability by simulation.<br/>
          <b>Loop:</b> select → expand → simulate → backpropagate.<br/>
          <b>UCT:</b> Q + c·√(ln(N)/n).<br/>
          <b>Terminal:</b> two passes or board full. Scoring: Chinese. Komi: <span id="komiLabel">6.5</span>.
        </div>

        <div class="grid-2">
          <div>
            <div class="label">THINK TIME (ms)</div>
            <input type="range" id="timeMs" min="100" max="3000" step="50" value="1200" />
            <div class="val" id="timeMsVal">1200</div>
          </div>
          <div>
            <div class="label">EXPLORATION (c)</div>
            <input type="range" id="cExp" min="0.5" max="2.5" step="0.05" value="1.41" />
            <div class="val" id="cExpVal">1.41</div>
          </div>
        </div>

        <div class="grid-2">
          <div>
            <button id="aiMove">AI: THINK NOW</button>
          </div>
          <div class="toggle">
            <input type="checkbox" id="autoAI" checked />
            <label for="autoAI">Auto-move for AI side</label>
          </div>
        </div>

        <div class="panel-sep"></div>

        <div class="stats">
          <div>Iterations: <span id="itCount">0</span></div>
          <div>Playouts/sec: <span id="pps">0</span></div>
          <div>Nodes: <span id="nodes">0</span></div>
          <div>Avg depth: <span id="avgDepth">0</span></div>
          <div>Root est. winrate (AI): <span id="winrate">—</span></div>
          <div>Best move: <span id="bestMove">—</span></div>
        </div>

        <div class="grid-2">
          <div>
            <div class="panel-sub">MOVE HEATMAP (root visit counts)</div>
            <canvas id="heatmap" width="270" height="270"></canvas>
          </div>
          <div>
            <div class="panel-sub">ROOT VALUE TREND</div>
            <canvas id="trend" width="270" height="270"></canvas>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="go_engine.js"></script>
  <script src="main.js"></script>
</body>
</html>
